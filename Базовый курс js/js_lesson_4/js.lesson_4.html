<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
</head>
<body>
    <script>
        /*
1. (это задание делайте по желанию)
Написать функцию, преобразующую число в объект.
Передавая на вход число в диапазоне [0, 999],
мы должны получить на выходе объект, в котором в
 соответствующих свойствах описаны разряды числа:
- единицы (в свойстве units)
- десятки (в свойстве tens)
- сотни (в свойстве hundereds)
Например, для числа 45 мы должны получить следующий объект:
{
units: 5, //это единицы
tens: 4, //это десятки
hundreds: 0, //это сотни
}
Если число было передано вне [0, 999] диапазона, не целое число или вообще не число,
необходимо выдать соответствующее сообщение с помощью console.log и вернуть пустой объект.
Вам может пригодиться:
*/
console.log("Задание №1 \n");

function checkNumber(number) {
    if (checkDiapason(number) && checkIsInteger(number) && !checkIsNaN(number)) {
      console.log(NumberToObject(number));
    } else {
        alert("Это должо быть целое число в диапазоне [0, 999]");
        return console.log({});
    }
}

function checkDiapason(number) {
    return number > 0 && number < 999;
}

 function checkIsInteger(number) {
    return Number.isInteger(number);
}

function checkIsNaN(number) {
    return Number.isNaN(number);
}

function NumberToObject(number) {
    let unitsOfNumber = number % 10;
    let tensOfNumber = Math.floor((number % 100) / 10);
    let hundredsOfNumber = Math.floor(number / 100);

    return {
        units: unitsOfNumber,
        tens: tensOfNumber,
        hundreds: hundredsOfNumber,
    }
}

checkNumber(45);

console.log("\n");

/*
1.1 (это обязательное задание) Сделайте в стиле es5, а затем в стиле es6
(по аналогии из дополнительных видео -> 3 примеры наследования -> типы на es5 и es6),
конструктор Product, который принимает параметры name и price, сохраните их как
свойства объекта. Также объекты типа Product должны иметь метод make25PercentDiscount,
который будет уменьшать цену в объекте на 25%. Имейте в виду, что метод make25PercentDiscount
не должен быть внутри функции-конструктора, и также не нужно создавать отдельный объект-прототип
(как объект transport в уроке).
*/
console.log("Задание №1.1 (ES5) \n");

function Product(name, price){
    this.name = name;
    this.price = price;
}
Product.prototype.make25PercentDiscount = function(){
    this.price *= 0.75;
}

let product = new Product("item", 500);
product.make25PercentDiscount();
console.log(product);

console.log("\n");
console.log("Задание №1.1 (ES6) \n");

class Product1{
    constructor(name, price) {
        this.name = name;
        this.price = price;
    }

    make25PercentDiscount(){
        this.price *= 0.75;
    }
}

let product1 = new Product("item", 500);
product1.make25PercentDiscount();
console.log(product1);

console.log("\n");

/*
1.2 (это обязательное задание) Сделайте в стиле es5, а затем в стиле es6 (по
аналогии из дополнительных видео -> 3 примеры наследования -> механика наследования),
а) конструктор Post, который принимает параметры author, text, date и сохраняет
их как свойства объекта. Объекты типа Post должны иметь метод edit, который будет
принимать текст и записывать его в свойство text объекта.
б) конструктор AttachedPost, который принимает параметры author, text, date.
Проинициализируйте эти свойства с помощью конструктора Post, чтобы не
дублировать код. Также в конструкторе AttachedPost должно создаваться свойство
highlighted со значением false. Унаследуйте в объектах типа AttachedPost методы из Post.
Объекты типа AttachedPost должны иметь метод makeTextHighlighted,
который будет назначать свойству highlighted значение true.
*/

console.log("Задание №1.1 (ES5) \n");

function Post(author, text, date) {
    this.author = author;
    this.text = text;
    this.date = date;
}

Post.prototype.edit = function(text) {
    this.text = text;
}

function AttachedPost(author, text, date) {
   Post.call(this, author, text, date);
   this.highlighted = false;
}

AttachedPost.prototype = Object.create(Post.prototype);
AttachedPost.prototype.makeTextHighlighted = function(){
    this.highlighted = true;
}

AttachedPost.prototype.constructor = AttachedPost;


let post = new Post('Alex','Hello World', 145);
post.edit('GoogBye');
console.log(post);

let attachedPost = new AttachedPost('Sergey','Hello World', 300);
attachedPost.edit('Bye');
attachedPost.makeTextHighlighted();
console.log(attachedPost);

console.log("Задание №1.1 (ES6) \n");

class Post1{
    constructor(author, text, date) {
        this.author = author;
        this.text = text;
        this.date = date;   
    }
    edit(text){
        this.text = text;  
    }
    
}

class AttachedPost1 extends Post1 {
   constructor(author, text, date, highlighted) {
       super(author, text, date);
       this.highlighted = false;
   }
   
   makeTextHighlighted(){
    this.highlighted = true;
   }
}

let post1 = new Post1('Mikle','Hello World', 555);
post1.edit('GoogBye');
console.log(post1);

let attachedPost1 = new AttachedPost1('Sergey','Hello World', 777);
attachedPost1.edit('Bye');
attachedPost1.makeTextHighlighted();
console.log(attachedPost1);

/*
2 (это задание не является частью учебной программы, делайте его по желанию).
Для игры бродилка (которая есть в дополнительных видео), добавить возможность
ходить по диагонали цифрами 1, 3, 7, 9.
Также необходимо сделать так, чтобы пользователь не мог совершить шаг в стенку,
т.е. при направлении в стенку и игрок оставался на том же месте где стоял.
*/

/*
3 (это задание не является частью учебной программы, делайте его по желанию). На базе
игры (приняв за пример), созданной в дополнительных видео, реализовать
игру «Кто хочет стать миллионером?».
Т.е. у вас должен быть главный объект, содержащий всю логику игры, который будет
иметь методы, например
метод run, возможно метод init и т.д.
В игре должны быть заранее подготовлены список вопросов и ответов (как минимум 5 вопросов).
Игра должна приветствовать пользователя, после чего задавать вопросы пользователю и
предлагать варианты
ответов в виде теста, например:
Сколько букв в слове "привет":
a. Пять.
b. Шесть.
c. Семь.
d. Куда я попал?
Проверять правильный вариант выбрал пользователь или нет, необходимо вести счет.
По окончании игры, когда было задано 5 вопросов, вы должны сообщить пользователю его счет и предложить
сыграть снова.
Также должна быть возможность выхода из игры заранее, если пользователю надоело играть.
*/

class Question  {
    constructor(question, options, rightOption) {
        this.question = question;
        this.options = options;
        this.rightOption = rightOption;
    }   
    
    show() {
        return String(this.question + "\n" + this.options.join('\n'));
    }
}

class Game {
    run() {
         return this.askQuestions(this.init());
    }

    init() {

        let setQuestions = [];

        setQuestions.push(new Question('Какой вкус у Куантро?', ['a - Базилик;', 'b - Лимон;', 'c - Ванили;', 'd - Ванилин;', 'e - Апельсин;'], 'e'));

        setQuestions.push(new Question('Как называется колокол часов Вестминстерского дворца в Лондоне?', ['a - Биг Бен;', 'b - Броненосец;', 'c - Калабаш;', 'd - Мумия;'], 'a'));

        setQuestions.push(new Question('Какая страна производит больше всего кофе в мире?', ['a - Колумбия;', 'b - Индонезия;', 'c - Бразилия;', 'd - Вьетнам;'], 'c'));

        setQuestions.push(new Question('В каком известном романе фигурировали Джо, Мег, Бет и Эми Марч?', ['a - Убить пересмешника;', 'b - Том Сойер;', 'c - Маленькие женщины;', 'd - Моби Дик;'], 'c'));

        setQuestions.push(new Question('Какой герой мультфильма живет в ананасе под водой?', ['a - Камбала;', 'b - Немо;', 'c - Рик и Морти;', 'd - Губка Боб Квадратные Штаны;'], 'd'));

        return setQuestions;

    }

    askQuestion(question) {
        const answer = prompt(question.show());
            
        let result = 0;

        if (answer === question.rightOption) {
            alert('Правильно!');
            result = 1;
        } else if (answer === null) {
            return -1;
        } else {
            alert('К сожалению это неправильный ответ(');
            result = 0;
        }

        return result;
    }

    askQuestions(allQuestions) {
        let counter = 0;

        for (const question of allQuestions) {
            let answer = this.askQuestion(question);

            if (answer === -1) {
                return -1;
            }
                counter += answer;
        }

        return counter;
    }
}

class GameFlow {
    startGame() {
        if (!confirm("Здравствуйте, хотите сиграть в игру 'Кто хочет стать миллионером?'")) {
            return;
        }
        
        let stop = false;

        while (!stop) {
            const game = new Game();
            let count = game.run();
            
            if (count === -1) {
                return;
            }

            alert("Ваш счет " + count + " очко(ов)");

            if (!confirm('Хотите сыграть еще раз?')) {
                stop = true;
            }
        }

        alert ('Пока!');
    }
}
    const gameFlow = new GameFlow();
    gameFlow.startGame();

</script>
</body>
</html>